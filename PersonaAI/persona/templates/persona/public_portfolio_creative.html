{% extends 'persona/base.html' %}
{% block title %}{{ portfolio.user.first_name|default:portfolio.user.username }}'s Portfolio{% endblock %}

{% block content %}
<style>
    /* Import creative fonts */
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500&display=swap');

    /* MARKER: Updated theme to be dark with white text */
    body {
        background-color: #1a1a1d; /* Dark charcoal background */
        color: #e5e5e5;           /* Light grey text */
    }
    nav { background-color: #1a1a1d; border-color: #2c2c2e; }
    nav a, nav button { color: #e5e5e5; }
    nav a.bg-indigo-600 { color: #ffffff; }
    nav span {
       background-image: linear-gradient(to right, #c13584, #833ab4);
    }
    /* END MARKER */

    .font-serif { font-family: 'Playfair Display', serif; }
    .font-sans-body { font-family: 'Poppins', sans-serif; }

    /* Custom filter for a duotone background image effect */
    .bg-duotone {
        position: relative;
        isolation: isolate;
    }
    .bg-duotone::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to top right, #833ab4, #c13584);
        mix-blend-mode: screen;
        z-index: -1;
    }
</style>

<div class="w-full max-w-5xl mx-auto px-4 pt-12 pb-8 font-sans-body">

    <!-- Header with a large, artistic background image -->
    <header 
        class="relative h-[60vh] min-h-[450px] rounded-lg flex flex-col justify-center items-center text-center p-8 text-white shadow-xl overflow-hidden bg-gray-800 bg-blend-multiply bg-cover bg-center bg-duotone animate-slide-in-up"
        style="background-image: url('{% if portfolio.background_image %}{{ portfolio.background_image.url }}{% else %}https://placehold.co/1200x800/111827/FFF?text=Persona.AI{% endif %}');">
        
        <div class="z-10">
            <p class="text-xl md:text-2xl font-medium text-white/80">
                {{ portfolio.job_title|default:'Creative Professional' }}
            </p>
            <h1 class="mt-2 text-6xl md:text-8xl font-bold font-serif text-white">
                {{ portfolio.user.get_full_name|default:portfolio.user.username }}
            </h1>
        </div>
    </header>

    <!-- Main Content Grid -->
    <main class="grid grid-cols-1 md:grid-cols-4 gap-12 mt-20">

        <!-- Left Column: About & Contact -->
        <div class="md:col-span-1">
            <section class="sticky top-28 space-y-12 animate-slide-in-up delay-100">
                <div>
                    <h2 class="font-serif text-3xl font-bold mb-4 text-white">About</h2>
                    <!-- MARKER: Text color changed from gray to light gray -->
                    <p class="text-gray-300 leading-relaxed">{{ portfolio.about_me_generated|default:"This section is ready to be populated by the AI." }}</p>
                </div>
                <div>
                     <h2 class="font-serif text-3xl font-bold mb-4 text-white">Contact</h2>
                     <div class="space-y-2">
                         <!-- MARKER: Text color changed from gray to light gray -->
                         {% if portfolio.email %}<a href="mailto:{{ portfolio.email }}" class="block font-semibold text-gray-300 hover:text-[#c13584] transition-colors">Email</a>{% endif %}
                         {% if portfolio.linkedin_url %}<a href="{{ portfolio.linkedin_url }}" target="_blank" rel="noopener noreferrer" class="block font-semibold text-gray-300 hover:text-[#c13584] transition-colors">LinkedIn</a>{% endif %}
                         {% if portfolio.github_url %}<a href="{{ portfolio.github_url }}" target="_blank" rel="noopener noreferrer" class="block font-semibold text-gray-300 hover:text-[#c13584] transition-colors">GitHub</a>{% endif %}
                     </div>
                </div>
                 <div>
                     <h2 class="font-serif text-3xl font-bold mb-4 text-white">Skills</h2>
                     <div class="flex flex-wrap gap-2">
                        {% for skill in portfolio.get_skills_list %}
                            <!-- MARKER: Skill tag style changed for dark theme -->
                            <span class="bg-gray-800 text-gray-300 text-sm font-medium px-3 py-1 rounded">{{ skill }}</span>
                        {% endfor %}
                    </div>
                </div>
            </section>
        </div>

        <!-- Right Column: Experience & Projects -->
        <div class="md:col-span-3 space-y-20">
            <!-- Work Experience Section -->
            <section class="animate-slide-in-up delay-200">
                <h2 class="font-serif text-4xl font-bold mb-8 text-white">Work Experience</h2>
                <div class="space-y-10">
                    {% for experience in portfolio.get_experiences %}
                        <div>
                            <!-- MARKER: Text color changed to white/light gray -->
                            <h3 class="text-2xl font-semibold text-white">{{ experience.name }}</h3>
                            <p class="text-md text-gray-400 font-medium my-1">{{ experience.technologies }}</p>
                            <p class="text-gray-300 leading-relaxed mt-2">{{ experience.description_generated|linebreaksbr }}</p>
                        </div>
                    {% empty %}
                        <p class="text-gray-500">Work experience will appear here.</p>
                    {% endfor %}
                </div>
            </section>
            
            <!-- Projects Section -->
            <section class="animate-slide-in-up delay-300">
                <h2 class="font-serif text-4xl font-bold mb-8 text-white">Projects</h2>
                <div class="space-y-10">
                    {% for project in portfolio.get_projects %}
                        <div>
                            <h3 class="text-2xl font-semibold">
                                {% if project.project_url %}
                                    <a href="{{ project.project_url }}" target="_blank" rel="noopener noreferrer" class="hover:text-[#c13584] transition-colors group inline-flex items-center gap-x-2">
                                        <!-- MARKER: Text color changed to white -->
                                        <span class="text-white group-hover:text-[#c13584]">{{ project.name }}</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 group-hover:text-[#c13584] transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                    </a>
                                {% else %}
                                    <span class="text-white">{{ project.name }}</span>
                                {% endif %}
                            </h3>
                            <div class="flex flex-wrap gap-2 my-2">
                                {% for tech in project.get_technologies_list %}
                                    <!-- MARKER: Skill tag style changed for dark theme -->
                                    <span class="bg-gray-800 text-gray-300 text-xs font-medium px-3 py-1 rounded-full">{{ tech }}</span>
                                {% endfor %}
                            </div>
                            <!-- MARKER: Text color changed to light gray -->
                            <p class="text-gray-300 leading-relaxed mt-3">{{ project.description_generated|linebreaksbr }}</p>
                        </div>
                    {% empty %}
                        <p class="text-gray-500">Projects will appear here.</p>
                    {% endfor %}
                </div>
            </section>
        </div>
    </main>
    
    <!-- Footer is inherited from base.html -->

</div>
{% endblock %}

